<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astro - Your Cosmic Journey</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0f;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            color: rgba(255, 255, 255, 0.9);
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at center, #2a1a4a 0%, #1a0a2a 30%, #0a0a0f 70%);
            overflow: hidden;
        }

        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        .floating-orbs {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(2px);
            animation: float-orb 20s infinite linear;
        }

        .orb-1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(219, 112, 147, 0.15) 0%, transparent 70%);
            top: 20%;
            left: 10%;
            animation-duration: 25s;
        }

        .orb-2 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.2) 0%, transparent 70%);
            top: 60%;
            right: 20%;
            animation-duration: 30s;
            animation-direction: reverse;
        }

        .orb-3 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
            top: 10%;
            right: 10%;
            animation-duration: 35s;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            padding: 1rem 2rem;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.9);
            position: relative;
            overflow: hidden;
        }

        .logo span {
            display: inline-block;
            animation: typing 3s steps(5, end) forwards;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-weight: 400;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover {
            color: rgba(236, 72, 153, 0.9);
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* Main Content */
        .main {
            padding-top: 80px;
        }

        /* Hero Section */
        .hero {
            min-height: 90vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
        }

        .hero-content {
            max-width: 800px;
            padding: 2rem;
        }

        .welcome-title {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(219, 112, 147, 0.9) 50%,
                rgba(236, 72, 153, 0.8) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
            letter-spacing: -2px;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .get-started-btn {
            background: linear-gradient(135deg, 
                rgba(236, 72, 153, 0.9) 0%,
                rgba(147, 51, 234, 1) 100%);
            border: none;
            color: white;
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .get-started-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.6s;
        }

        .get-started-btn:hover::before {
            left: 100%;
        }

        .get-started-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 40px rgba(236, 72, 153, 0.4);
        }

        /* Sections */
        .section {
            padding: 5rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.9) 0%,
                rgba(219, 112, 147, 0.8) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Testimonials */
        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .testimonial-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
            transition: transform 0.3s ease;
        }

        .testimonial-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(236, 72, 153, 0.2);
        }

        .testimonial-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .testimonial-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, 
                rgba(236, 72, 153, 0.8) 0%,
                rgba(147, 51, 234, 0.9) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .testimonial-info h4 {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 0.25rem;
        }

        .testimonial-role {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .rating {
            display: flex;
            gap: 0.25rem;
            margin-bottom: 1rem;
        }

        .star {
            color: #ffd700;
            font-size: 1.2rem;
        }

        .testimonial-text {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            font-style: italic;
        }

        /* Review Form */
        .review-form {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
            max-width: 600px;
            margin: 0 auto 3rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: rgba(236, 72, 153, 0.6);
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .rating-input {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .rating-star {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .rating-star:hover,
        .rating-star.active {
            color: #ffd700;
        }

        .submit-review-btn {
            background: linear-gradient(135deg, 
                rgba(236, 72, 153, 0.9) 0%,
                rgba(147, 51, 234, 1) 100%);
            border: none;
            color: white;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .submit-review-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(236, 72, 153, 0.4);
        }

        /* Terms Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: rgba(10, 10, 15, 0.95);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 5% auto;
            padding: 2rem;
            width: 90%;
            max-width: 800px;
            border-radius: 16px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: rgba(255, 255, 255, 0.6);
            float: right;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: rgba(255, 255, 255, 0.9);
        }

        .modal h2 {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1.5rem;
        }

        .modal p, .modal li {
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .modal ul {
            padding-left: 1.5rem;
        }

        /* Animations */
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        @keyframes float-orb {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 5ch; }
        }

        /* Responsive */
        @media (max-width: 968px) {
            .nav-links {
                display: none;
            }

            .welcome-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .testimonials-grid {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 3rem 1rem;
            }
        }

        /* Generate more stars */
        .star:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
        .star:nth-child(2) { top: 30%; left: 80%; animation-delay: 1s; }
        .star:nth-child(3) { top: 60%; left: 20%; animation-delay: 2s; }
        .star:nth-child(4) { top: 80%; left: 70%; animation-delay: 0.5s; }
        .star:nth-child(5) { top: 10%; left: 60%; animation-delay: 1.5s; }
        .star:nth-child(6) { top: 70%; left: 90%; animation-delay: 2.5s; }
        .star:nth-child(7) { top: 40%; left: 50%; animation-delay: 0.8s; }
        .star:nth-child(8) { top: 85%; left: 30%; animation-delay: 1.8s; }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="stars">
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
        </div>
        <div class="floating-orbs">
            <div class="orb orb-1"></div>
            <div class="orb orb-2"></div>
            <div class="orb orb-3"></div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="logo"><span>VOXEN</span></div>
            <div class="nav-links">
                <a href="#home" class="nav-link">Home</a>
                <a href="#testimonials" class="nav-link">Reviews</a>
                <a href="#" class="nav-link" onclick="openModal('termsModal')">Terms</a>
            </div>
            <div class="user-section">
                <img id="userAvatar" class="user-avatar" src="" alt="User Avatar" style="display: none;">
                <span id="userName"></span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-content">
                <h1 class="welcome-title">Welcome to Your AI Journey</h1>
                <p class="hero-subtitle">Our AI Voice Agent is an intelligent, conversational assistant designed to interact naturally with users, understand their needs in real time, and provide quick, accurate, and personalized responses — making communication seamless and efficient.</p>
                <button class="get-started-btn" onclick="getStarted()">Get Started</button>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="section">
            <h2 class="section-title">What Our Space Explorers Say</h2>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-avatar">AS</div>
                        <div class="testimonial-info">
                            <h4>Alex Smith</h4>
                            <div class="testimonial-role">Astronaut Trainee</div>
                        </div>
                    </div>
                    <div class="rating">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                    <p class="testimonial-text">"Astro has completely transformed my understanding of space exploration. The interactive training modules and community support are incredible. I feel prepared for my upcoming space mission!"</p>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-avatar">MJ</div>
                        <div class="testimonial-info">
                            <h4>Maria Johnson</h4>
                            <div class="testimonial-role">Space Engineer</div>
                        </div>
                    </div>
                    <div class="rating">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                    <p class="testimonial-text">"The technical resources and simulation tools are phenomenal. Astro provides everything needed to understand complex space systems. Highly recommend to anyone serious about space technology."</p>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-avatar">DL</div>
                        <div class="testimonial-info">
                            <h4>David Lee</h4>
                            <div class="testimonial-role">Research Scientist</div>
                        </div>
                    </div>
                    <div class="rating">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                    <p class="testimonial-text">"Amazing platform for space research and collaboration. The data analysis tools have helped me publish three papers on exoplanet discovery. The future of space exploration starts here."</p>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-avatar">SC</div>
                        <div class="testimonial-info">
                            <h4>Sarah Chen</h4>
                            <div class="testimonial-role">Mission Specialist</div>
                        </div>
                    </div>
                    <div class="rating">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                    <p class="testimonial-text">"The VR space simulations are incredibly realistic. I've trained for Mars missions right from my home. Astro is revolutionizing how we prepare for space exploration."</p>
                </div>
            </div>

            <!-- Review Form -->
            <div class="review-form">
                <h3 style="margin-bottom: 1.5rem; color: rgba(255, 255, 255, 0.9);">Share Your Experience</h3>
                <form id="reviewForm">
                    <div class="form-group">
                        <label class="form-label">Your Rating</label>
                        <div class="rating-input" id="ratingInput">
                            <span class="rating-star" data-rating="1">★</span>
                            <span class="rating-star" data-rating="2">★</span>
                            <span class="rating-star" data-rating="3">★</span>
                            <span class="rating-star" data-rating="4">★</span>
                            <span class="rating-star" data-rating="5">★</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="reviewTitle">Review Title</label>
                        <input type="text" id="reviewTitle" class="form-input" placeholder="Give your review a title..." required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="reviewText">Your Review</label>
                        <textarea id="reviewText" class="form-input form-textarea" placeholder="Share your experience with Astro..." required></textarea>
                    </div>
                    <button type="submit" class="submit-review-btn">Submit Review</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Terms Modal -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('termsModal')">&times;</span>
            <h2>Terms and Conditions</h2>
            
            <h3 style="color: rgba(255, 255, 255, 0.8); margin-top: 2rem; margin-bottom: 1rem;">1. Acceptance of Terms</h3>
            <p>By accessing and using Astro's space exploration platform, you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.</p>

            <h3 style="color: rgba(255, 255, 255, 0.8); margin-top: 2rem; margin-bottom: 1rem;">2. Service Description</h3>
            <p>Astro provides space exploration training, simulation tools, research resources, and community features for space enthusiasts, researchers, and professionals. Our services include but are not limited to:</p>
            <ul>
                <li>Interactive space mission simulations</li>
                <li>Educational content and training modules</li>
                <li>Research collaboration tools</li>
                <li>Virtual reality space experiences</li>
                <li>Community forums and networking</li>
            </ul>

            <h3 style="color: rgba(255, 255, 255, 0.8); margin-top: 2rem; margin-bottom: 1rem;">3. User Responsibilities</h3>
            <p>Users are responsible for:</p>
            <ul>
                <li>Providing accurate and up-to-date information during registration</li>
                <li>Maintaining the confidentiality of their account credentials</li>
                <li>Using the platform in accordance with applicable laws and regulations</li>
                <li>Respecting other users and maintaining professional conduct</li>
                <li>Not sharing or distributing proprietary simulation data without authorization</li>
            </ul>

            <h3 style="color: rgba(255, 255, 255, 0.8); margin-top: 2rem; margin-bottom: 1rem;">4. Intellectual Property</h3>
            <p>All content, including but not limited to text, graphics, logos, images, audio clips, and software, is the property of Astro or its content suppliers and protected by intellectual property laws.</p>

            <h3 style="color: rgba(255, 255, 255, 0.8); margin-top: 2rem; margin-bottom: 1rem;">5. Privacy Policy</h3>
            <p>We are committed to protecting your privacy. Personal information collected through our platform is used solely for service improvement and user experience enhancement. We do not sell or share personal data with third parties without explicit consent.</p>

            <h3 style="color: rgba(255, 255, 255, 0.8); margin-top: 2rem; margin-bottom: 1rem;">6. Limitation of Liability</h3>
            <p>Astro shall not be liable for any direct, indirect, incidental, special, or consequential damages resulting from the use or inability to use our services.</p>

            <h3 style="color: rgba(255, 255, 255, 0.8); margin-top: 2rem; margin-bottom: 1rem;">7. Modifications</h3>
            <p>We reserve the right to modify these terms at any time. Users will be notified of significant changes via email or platform notifications.</p>

            <p style="margin-top: 2rem; font-style: italic;">Last updated: September 2025</p>
        </div>
    </div>

    <script>
        let currentUser = null;
        let selectedRating = 0;

        // Check authentication and load user data
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const token = urlParams.get('token');
            const userParam = urlParams.get('user');
            
            if (token && userParam) {
                currentUser = JSON.parse(decodeURIComponent(userParam));
                displayUserInfo(currentUser);
                localStorage.setItem('token', token);
            } else if (localStorage.getItem('token')) {
                fetchUserProfile();
            } else {
                window.location.href = '/';
            }

            // Generate more stars dynamically
            generateStars();
            
            // Initialize rating system
            initializeRating();
        });

        function displayUserInfo(user) {
            currentUser = user;
            document.getElementById('userName').textContent = user.full_name || user.username;
            
            if (user.profile_picture) {
                const avatar = document.getElementById('userAvatar');
                avatar.src = user.profile_picture;
                avatar.style.display = 'block';
            }
        }

        async function fetchUserProfile() {
            try {
                const response = await fetch('/api/profile', {
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('token')
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    displayUserInfo(data.user);
                } else {
                    throw new Error('Failed to fetch profile');
                }
            } catch (error) {
                console.error('Error:', error);
                localStorage.removeItem('token');
                window.location.href = '/';
            }
        }

        function logout() {
            localStorage.removeItem('token');
            window.location.href = '/';
        }

        // Get Started button - redirects to chat page
        function getStarted() {
            window.location.href = "/chat";
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // Rating system
        function initializeRating() {
            const stars = document.querySelectorAll('.rating-star');
            const ratingInput = document.getElementById('ratingInput');
            
            if (stars.length === 0 || !ratingInput) {
                console.warn('Rating elements not found');
                return;
            }
            
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    selectedRating = parseInt(this.dataset.rating);
                    updateRatingDisplay();
                });

                star.addEventListener('mouseenter', function() {
                    const rating = parseInt(this.dataset.rating);
                    highlightStars(rating);
                });
            });

            ratingInput.addEventListener('mouseleave', function() {
                updateRatingDisplay();
            });
        }

        function highlightStars(rating) {
            const stars = document.querySelectorAll('.rating-star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function updateRatingDisplay() {
            highlightStars(selectedRating);
        }

        // Review form submission
        const reviewForm = document.getElementById('reviewForm');
        if (reviewForm) {
            reviewForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (!selectedRating) {
                    alert('Please select a rating before submitting your review.');
                    return;
                }

                const formData = {
                    rating: selectedRating,
                    title: document.getElementById('reviewTitle').value,
                    text: document.getElementById('reviewText').value,
                    user_id: currentUser.id,
                    user_name: currentUser.full_name || currentUser.username
                };

                try {
                    const response = await fetch('/api/reviews', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + localStorage.getItem('token')
                        },
                        body: JSON.stringify(formData)
                    });

                    if (response.ok) {
                        alert('Thank you for your review! Your feedback helps us improve the cosmic experience for everyone.');
                        
                        // Reset form
                        document.getElementById('reviewForm').reset();
                        selectedRating = 0;
                        updateRatingDisplay();
                        
                        // Add review to page
                        addReviewToPage(formData);
                    } else {
                        throw new Error('Failed to submit review');
                    }
                } catch (error) {
                    console.error('Review submission error:', error);
                    alert('Failed to submit review. Please try again.');
                }
            });
        }

        function addReviewToPage(reviewData) {
            const testimonialsGrid = document.querySelector('.testimonials-grid');
            const reviewCard = createReviewCard(reviewData);
            testimonialsGrid.appendChild(reviewCard);
            
            // Add animation
            reviewCard.style.opacity = '0';
            reviewCard.style.transform = 'translateY(20px)';
            setTimeout(() => {
                reviewCard.style.transition = 'all 0.5s ease';
                reviewCard.style.opacity = '1';
                reviewCard.style.transform = 'translateY(0)';
            }, 100);
        }

        function createReviewCard(reviewData) {
            const card = document.createElement('div');
            card.className = 'testimonial-card';
            
            const initials = reviewData.user_name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
            const stars = '★'.repeat(reviewData.rating) + '☆'.repeat(5 - reviewData.rating);
            
            card.innerHTML = `
                <div class="testimonial-header">
                    <div class="testimonial-avatar">${initials}</div>
                    <div class="testimonial-info">
                        <h4>${reviewData.user_name}</h4>
                        <div class="testimonial-role">Space Explorer</div>
                    </div>
                </div>
                <div class="rating">
                    ${stars.split('').map(star => `<span class="star">${star}</span>`).join('')}
                </div>
                <h5 style="color: rgba(255, 255, 255, 0.9); margin-bottom: 0.5rem;">${reviewData.title}</h5>
                <p class="testimonial-text">"${reviewData.text}"</p>
            `;
            
            return card;
        }

        // Generate stars dynamically
        function generateStars() {
            const starsContainer = document.querySelector('.stars');
            for (let i = 8; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.top = Math.random() * 100 + '%';
                star.style.left = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>